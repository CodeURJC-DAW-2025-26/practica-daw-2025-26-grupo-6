{{>header}}

<main class="main">
  <section id="quote" class="quote section">
    <div class="container" data-aos="fade-up" data-aos-delay="100">
      <div class="row justify-content-center">
        <div class="col-lg-10" data-aos="fade-left" data-aos-delay="300">
          <div class="quote-form">
            <div class="form-intro">
              <h3>Añadir o modificar noticia</h3>
              <p>Rellena los campos para añadir o modificar una noticia.</p>
            </div>

            {{#hasErrors}}
            <div class="alert alert-danger alert-dismissible fade show mb-4" role="alert"
              style="border-left: 5px solid #890f00;">
              <strong><i class="bi bi-exclamation-triangle-fill me-2"></i> Ups! Hay errores:</strong>
              <ul class="mt-2 mb-0">
                {{#allErrors}}
                <li>{{.}}</li>
                {{/allErrors}}
              </ul>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {{/hasErrors}}
            <form method="post" action="/new_form" enctype="multipart/form-data" class="php-email-form">
              {{#newPost}}
              <div class="form">
                <input type="hidden" name="newId" value="{{#newId}}{{newId}}{{/newId}}" />

                <div class="form-field">
                  <label for="newName" class="required-label">Nombre:</label>
                  <input type="text" name="newName" id="newName" value="{{#newName}}{{newName}}{{/newName}}" required>
                </div>
                <br>

                <div class="form-field full-width">
                  <label for="newDescription" class="required-label">Descripción:</label>
                  <textarea name="newDescription" id="newDescription" rows="8"
                    required>{{#newDescription}}{{newDescription}}{{/newDescription}}</textarea>
                </div>
                <br>

                <div class="form-field">
                  <label for="newTag" class="form-label">Tag:</label>
                  <input type="text" name="newTag" id="newTag" value="{{#newTag}}{{newTag}}{{/newTag}}">
                </div>
                <br>

                <div class="form-field">
                  <label for="imageField" class="form-label">Imagen (dejar vacío para mantener la actual):</label>

                  {{#newId}}
                  <input class="form-control" type="file" name="imageField" id="imageField">
                  {{/newId}}

                  {{^newId}}
                  <input class="form-control" type="file" name="imageField" id="imageField" required>
                  {{/newId}}
                </div>
              </div>
              {{/newPost}}

              <div class="row mt-4">
                <div class="col-lg-3">
                  <a href="/news" class="submit-btn text-center pt-2"
                    style="text-decoration:none; display:block; background: #6c757d;">Atrás</a>
                </div>
                <div class="col-lg-2"></div>
                <div class="col-lg-3">
                  <button type="submit" class="submit-btn"><span>Guardar Noticia</span></button>
                </div>
              </div>
              <input type="hidden" name="_csrf" value="{{token}}" />
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

{{>footer}}